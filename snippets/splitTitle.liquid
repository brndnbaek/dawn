<div class="text-slate-700 font-semibold leading-[1.1] sm:leading-[1.4] w-full">
  <a href="{{ card_product.url }}" class="flex flex-col justify-evenly items-center text-center h-full no-underline full-unstyled-link">
    {% case card_product.type %}
      {% when 'Writing Material' %}
        {% assign splitTitle = card_product.title | split: ' - ' %}
        {{ splitTitle[0] }}
        <br>
        {{ splitTitle[1] }}
        <br>
        {{ splitTitle[2] | truncate: 35 }}
        {{ splitTitle[3] | truncate: 35 }}
      {% when 'Plush' %}
        {% assign splitTitle = card_product.title | split: ' - ' %}
        {% for linetitle in splitTitle %}
          {{ linetitle }}
          <br>
        {% endfor %}
      {% when 'K-Cosmetic' %}
        {{ card_product.title | escape | replace_first: '] ', ']<br />' | newline_to_br }}
      {% when 'Kpop CD' %}
        {% if card_product.title contains " - " %}
          {% assign splitTitle = card_product.title | split: ' - ' %}
          {% assign artist = splitTitle[0] | remove: 'K-Pop' | remove: 'CD ' %}
          {% assign rearSplit = splitTitle[1] | split: " '" %}
          {% assign albumNumber = rearSplit[0] %}
          {% assign albumTitle = rearSplit[1] | remove_last: "'" %}
        {% else %}
          {% assign splitTitle = card_product.title | split: " '" %}
          {% assign artist = splitTitle[0] | remove: 'K-Pop' | remove: 'CD ' %}
          {% assign albumTitle = splitTitle[1] | remove_last: "'" %}
        {% endif %}

        <div class="text-[1.4rem] font-bold">{{artist}}</div>
        {% comment %} <div>album #: {{albumNumber}}</div> {% endcomment %}
        <div>{{ albumTitle }}</div>

      {% when 'Gundam Model Kit' %}
        {% assign substring = card_product.metafields.my_fields.product_lines | prepend: ' ' | append: ' ' %}
        {% assign removeProductLine = card_product.title | replace: substring, ' ' | remove: 'Model Kit' %}
        {% assign lineSplit = removeProductLine | replace: ' #', '<br>#' | replace: ' (', '<br>' | remove: ')' %}
        {% if lineSplit contains '<br>' %}
          {% assign threeLines = lineSplit | split: '<br>' %}
        <div>{{ threeLines[0] }}</div>
        <div>{{ threeLines[1] }}</div>
        <div>{{ threeLines[2] | truncate: 33 }}</div>
          {% else %}
          <div>{{ lineSplit }}</div>
        {% endif %}
      
      {% when 'Other Model Kit' %}
        {% assign substring = card_product.metafields.my_fields.product_lines | prepend: '- ' %}
        {% assign removeProductLine = card_product.title | replace: substring, '' | remove: 'Model Kit' %}
        {% assign lineSplit = removeProductLine | replace: ' - ', '<br>' | replace: ' #', '<br>#' | replace: ' (', '<br>' | remove: ')' | replace: ' [', '<br>' | remove: ']' %}
          {% assign threeLines = lineSplit | split: '<br>' %}
        <div class="">{{ threeLines[0] }}</div>
        <div>{{ threeLines[1] }}</div>
        <div>{{ threeLines[2] | truncate: 33 }}</div>
        
        {% comment %} {% unless dashSplit[0] contains ' #' %}
          <span class="block">{{dashSplit[0]}}</span>
            {% if card_product.metafields.my_fields.product_lines %}
              {% unless dashSplit[2] contains ' (' %}
                <span class="block">{{ dashSplit[2] }}</span>
              {% else %}
                {% assign bracketSplit = dashSplit[2] | split: ' (' %}
                  <span class="block">{{ bracketSplit[0] }}</span>
                  <span class="block">{{ bracketSplit[1] | remove: ')' }}</span>
              {% endunless %}
            {% else %}
              {% unless dashSplit[1] contains ' (' %}
                <span class="block">{{ dashSplit[1]}}</span>
              {% else %}
                {% assign bracketSplit = dashSplit[0] | split: ' (' %}
                  <div>{{ bracketSplit[0] }}</div>
                  <div>{{ bracketSplit[1] | remove: ')'}}</div>
              {% endunless%}
            {% endif %}
          {% else %}
            {% assign sharpSplit = dashSplit[0] | split: ' #' %}
            <div>{{ sharpSplit[0] }}</div>
            {% if sharpSplit[1] contains ' (' %}
              {% assign bracketSplit = sharpSplit[1] | split: ' ('%}
                <div>{{ bracketSplit[0] }}</div>
                <div>{{ bracketSplit[1] | remove: ')' }}</div>
              {% else %}
                <div>{{ sharpSplit[1] }}</div>
            {% endif %}
          {% endunless %} {% endcomment %}



{% comment %} 
        {% assign splitTitle = card_product.title | remove: 'Model Kit' | split: ' - ' %}
        {% assign secondSplit = splitTitle[0] | split: ' (' %}
        {% assign thirdSplit = secondSplit[0] | split: ' #' %}
        {% if splitTitle[0] contains ' #'%}
          <span class="block font-semibold">{{- thirdSplit[0] }}</span>
          <span class="block font-medium">{{- thirdSplit[1] | prepend: '#' }}</span>
          <span class="block font-medium">{{ secondSplit[1] | remove: ')' }}</span>
        {% endif%}
        {% if card_product.metafields.my_fields.product_lines %}
          <span class="block font-semibold text-slate-700">{{ splitTitle[2] | truncate: 50 }}</span>
          {% else %}
          {{ splitTitle[1] | truncate: 35 }}
        {% endif %} 
{% endcomment %}

      {% when 'Figure' %}
        {% assign splitTitle = card_product.title | split: ' - ' %}
        <span class="font-semibold">{{ splitTitle[0] }} </span>
        {% if splitTitle[2] %}
          {% assign secondSplit = splitTitle[2] | split: ' (' %}
          <span class="block font-medium text-slate-700">{{ secondSplit[0] }} </span>
          <span class="block font-medium text-slate-700">{{ secondSplit[1] | remove: ')' | truncate: 35 }} </span>
        {% else %}
          <span class="block font-medium">{{ splitTitle[1] }}</span>
        {% endif %}
      {% when 'figure' %}
        {% assign splitTitle = card_product.title | split: ' - ' %}
        <span class="font-semibold">{{ splitTitle[0] }} </span>
        {% if splitTitle[2] %}
          {% assign secondSplit = splitTitle[2] | split: ' (' %}
          <span class="block font-medium text-slate-700">{{ secondSplit[0] }} </span>
          <span class="block font-medium text-slate-700">{{ secondSplit[1] | remove: ')' | truncate: 35 }} </span>
        {% else %}
          <span class="block font-medium">{{ splitTitle[1] }}</span>
        {% endif %}
    
      {% else %}
        {% assign splitTitle = card_product.title | split: ' - ' %}
        <span class="font-semibold">{{ splitTitle[0] }}</span>
        <span class="block font-medium text-slate-700">{{ splitTitle[1] }} </span>
        <span class="block font-medium text-slate-700">{{ splitTitle[2] | truncate: 35 }} </span>
        {{ splitTitle[3] | truncate: 35 }}
    {% endcase %}
  </a>
</div>
